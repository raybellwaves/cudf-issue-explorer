{"assignees":[],"author":{"id":"MDQ6VXNlcjMxOTA0MDU=","is_bot":false,"login":"shwina","name":"Ashwin Srinath"},"body":"Memory allocations should already use PTDS since both numba and CuPy allocate memory using RMM. Kernels on the other hand, may explicitly need to be passed the `cudaStreamPerThread` stream handle.\r\n\r\ncc: @jakirkham @kkraus14","closed":false,"closedAt":null,"comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY3MjExOTg5Ng==","author":{"login":"jakirkham"},"authorAssociation":"MEMBER","body":"Some relevant issues listed below:\r\n\r\nxref: https://github.com/rapidsai/dask-cuda/issues/96\r\nxref: https://github.com/cupy/cupy/issues/3755\r\nxref: https://github.com/numba/numba/issues/5137\r\n\r\nAlso some relevant PRs below:\r\n\r\nxref: https://github.com/rapidsai/rmm/pull/480\r\nxref: https://github.com/dask/distributed/pull/4034","createdAt":"2020-08-11T17:30:55Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/5922#issuecomment-672119896","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc4MDEyNDAwNQ==","author":{"login":"github-actions"},"authorAssociation":"NONE","body":"This issue has been marked rotten due to no recent activity in the past 90d. Please close this issue if no further response or action is needed. Otherwise, please respond with a comment indicating any updates or changes to the original issue and/or confirm this issue still needs to be addressed.","createdAt":"2021-02-16T21:18:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/5922#issuecomment-780124005","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc4MDk0MzI3OA==","author":{"login":"jakirkham"},"authorAssociation":"MEMBER","body":"cc @pentschev (for awareness)","createdAt":"2021-02-18T00:23:17Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/5922#issuecomment-780943278","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps5MuucE","author":{"login":"vyasr"},"authorAssociation":"CONTRIBUTOR","body":"@shwina Is this intended to be unconditional, or only when requested by the user? We will also need to start passing streams down to libcudf everywhere in order to support this.","createdAt":"2022-10-21T18:41:43Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/5922#issuecomment-1287317252","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps5MuyUi","author":{"login":"pentschev"},"authorAssociation":"MEMBER","body":"My take on this is that we could begin with an opt-in solution, like we've done for CuPy with [`CUPY_CUDA_PER_THREAD_DEFAULT_STREAM`](https://docs.cupy.dev/en/stable/reference/environment.html#envvar-CUPY_CUDA_PER_THREAD_DEFAULT_STREAM). This could allow us to test things without being too intrusive, and if this proves to be useful then we could enable it by default.","createdAt":"2022-10-21T19:00:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/5922#issuecomment-1287333154","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps5Mu3g0","author":{"login":"jakirkham"},"authorAssociation":"MEMBER","body":"Yeah agreed. We probably want to support both the current mode and PTDS for some time. There are likely different issues we will run into. So having an escape hatch to old behavior is quite useful.","createdAt":"2022-10-21T19:25:42Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/5922#issuecomment-1287354420","viewerDidAuthor":false}],"createdAt":"2020-08-11T13:45:41Z","id":"MDU6SXNzdWU2NzY4OTEwMjg=","labels":[{"id":"MDU6TGFiZWw1OTk2MjY1NjE=","name":"feature request","description":"New feature or request","color":"a2eeef"},{"id":"MDU6TGFiZWwxMTM5NzQxMjEz","name":"cuDF (Python)","description":"Affects Python cuDF API.","color":"1d76db"}],"milestone":null,"number":5922,"projectCards":[{"project":{"name":"Feature Planning"},"column":{"name":"Needs prioritizing"}}],"projectItems":[],"reactionGroups":[],"state":"OPEN","title":"[FEA] Pass `cudaStreamPerThread` to numba/CuPy kernels","updatedAt":"2024-02-23T18:42:48Z","url":"https://github.com/rapidsai/cudf/issues/5922"}
