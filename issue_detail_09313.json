{"assignees":[],"author":{"id":"MDQ6VXNlcjMwMjcxOTU=","is_bot":false,"login":"devavret","name":"Devavret Makkar"},"body":"When reading the statistics for an ORC file written by cuDF, the result for sum is wrong when read using cuDF and absent when using pyorc.\r\n\r\n```python\r\nIn [1]: import cudf\r\n\r\nIn [2]: import pyorc\r\n\r\nIn [3]: gdf = cudf.DataFrame({'b':[1,7], 'a':['Badam khao', 'roz']})\r\n\r\nIn [4]: gdf.to_orc(\"temp.orc\")\r\n\r\nIn [5]: cudf.io.orc.read_orc_statistics([\"temp.orc\"])\r\nOut[5]: \r\n([{'col0': {'number_of_values': 2},\r\n   'b': {'number_of_values': 2, 'minimum': 1, 'maximum': 7, 'sum': 8},\r\n   'a': {'number_of_values': 2,\r\n    'minimum': 'Badam khao',\r\n    'maximum': 'roz',\r\n    'sum': -7}}],\r\n [{'col0': {'number_of_values': 2},\r\n   'b': {'number_of_values': 2, 'minimum': 1, 'maximum': 7, 'sum': 8},\r\n   'a': {'number_of_values': 2,\r\n    'minimum': 'Badam khao',\r\n    'maximum': 'roz',\r\n    'sum': -7}}])\r\n\r\nIn [6]: f = open(\"temp.orc\", 'rb')\r\n\r\nIn [7]: r = pyorc.Reader(f)\r\n\r\nIn [8]: r[1].statistics\r\nOut[8]: \r\n{'has_null': False,\r\n 'number_of_values': 2,\r\n 'minimum': 1,\r\n 'maximum': 7,\r\n 'sum': 8,\r\n 'kind': <TypeKind.LONG: 4>}\r\n\r\nIn [9]: r[2].statistics\r\nOut[9]: {'has_null': False, 'number_of_values': 2, 'kind': <TypeKind.STRING: 7>}\r\n```\r\n\r\n#### Expected result\r\nSum statistics contains the sum of lengths of all the strings in the column. We do correctly compute this in libcudf, so it should be present when reading with pyorc and correct when reading with cudf.\r\n\r\nThere's two issues here:\r\n\r\n- [x] String sum statistics are encoded incorrectly (will be fixed by https://github.com/rapidsai/cudf/pull/11740)\r\n- [ ] pyroc does not read cuDF-written ORC string statistics","closed":false,"closedAt":null,"comments":[{"id":"IC_kwDOBWUGps45xp93","author":{"login":"github-actions"},"authorAssociation":"NONE","body":"This issue has been labeled `inactive-30d` due to no recent activity in the past 30 days. Please close this issue if no further response or action is needed. Otherwise, please respond with a comment indicating any updates or changes to the original issue and/or confirm this issue still needs to be addressed. This issue will be labeled `inactive-90d` if there is no activity in the next 60 days.","createdAt":"2021-11-15T21:03:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/9313#issuecomment-969318263","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps495X0J","author":{"login":"github-actions"},"authorAssociation":"NONE","body":"This issue has been labeled `inactive-90d` due to no recent activity in the past 90 days. Please close this issue if no further response or action is needed. Otherwise, please respond with a comment indicating any updates or changes to the original issue and/or confirm this issue still needs to be addressed.","createdAt":"2022-02-13T22:03:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/9313#issuecomment-1038449929","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps5Ht04X","author":{"login":"vuule"},"authorAssociation":"CONTRIBUTOR","body":"This is a correctness issue, prioritizing for 22.10.","createdAt":"2022-08-02T20:43:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/9313#issuecomment-1203195415","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps5LBR57","author":{"login":"vuule"},"authorAssociation":"CONTRIBUTOR","body":"Additional info related to the pyorc part of the issue: Spark is able to read ORC string column statistics, and uses them for predicate based filtering.","createdAt":"2022-09-26T21:00:37Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/9313#issuecomment-1258626683","viewerDidAuthor":false}],"createdAt":"2021-09-27T11:01:54Z","id":"I_kwDOBWUGps48FO70","labels":[{"id":"MDU6TGFiZWw1OTk2MjY1NTk=","name":"bug","description":"Something isn't working","color":"d73a4a"},{"id":"MDU6TGFiZWwxMTM5NzQwNjY2","name":"libcudf","description":"Affects libcudf (C++/CUDA) code.","color":"c5def5"},{"id":"MDU6TGFiZWwxMTg1MjQ0MTQy","name":"cuIO","description":"cuIO issue","color":"fef2c0"}],"milestone":null,"number":9313,"projectCards":[{"project":{"name":"v23.02 Release"},"column":{"name":"Issue-Needs prioritizing"}}],"projectItems":[],"reactionGroups":[],"state":"OPEN","title":"[BUG] pyorc does not read string column statistics of cuDF generated files","updatedAt":"2023-04-02T22:39:54Z","url":"https://github.com/rapidsai/cudf/issues/9313"}
