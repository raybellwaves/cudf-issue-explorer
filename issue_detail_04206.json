{"assignees":[],"author":{"id":"MDQ6VXNlcjU1ODAwNTY=","is_bot":false,"login":"trevorsm7","name":"Trevor Smith"},"body":"**Describe the bug**\r\n`expand_bits_to_bytes`, defined below, is a utility function for unit tests which unpacks a bitmask into a list of valids per element. As currently defined, this returns a `list` of `int` where 1 is valid and 0 is invalid. However, in every case where this is used, the caller converts the result to `ndarray` of `bool`. The input to the function is expected to be an `ndarray` anyway, so there could be some numpy transform which gives us the result as `ndarray` directly.\r\nhttps://github.com/rapidsai/cudf/blob/a831f11bdeb2cb8dfcc2f47ef69b596a2334c3d2/python/cudf/cudf/tests/utils.py#L36-L43\r\n\r\n**Expected behavior**\r\nRefactor `expand_bits_to_bytes` to return `ndarray` of `bool`. [unpackbits](https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.unpackbits.html) looks like it would be useful here.","closed":false,"closedAt":null,"comments":[{"id":"MDEyOklzc3VlQ29tbWVudDU4ODU4OTIxMg==","author":{"login":"jrhemstad"},"authorAssociation":"CONTRIBUTOR","body":"I think this is an old utility function that is slated to be eliminated and using https://github.com/rapidsai/cudf/issues/4142 instead. @kkraus14 correct me if I'm wrong. ","createdAt":"2020-02-20T03:19:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/4206#issuecomment-588589212","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU4ODU4OTc2NQ==","author":{"login":"kkraus14"},"authorAssociation":"COLLABORATOR","body":"I wasn't even aware of the existence of this function. It should probably use https://github.com/rapidsai/cudf/blob/branch-0.13/python/cudf/cudf/utils/cudautils.py#L250 instead of rolling it's own.","createdAt":"2020-02-20T03:22:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/4206#issuecomment-588589765","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU4ODU4OTg0OA==","author":{"login":"kkraus14"},"authorAssociation":"COLLABORATOR","body":"The function I linked above would be replaced with #4142 as Jake mentioned ðŸ˜„","createdAt":"2020-02-20T03:22:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/4206#issuecomment-588589848","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU4ODU5MDY0Ng==","author":{"login":"kkraus14"},"authorAssociation":"COLLABORATOR","body":"Oh wait, this is a testing utility function that likely works on host objects. We probably would want to use: https://docs.scipy.org/doc/numpy/reference/generated/numpy.unpackbits.html","createdAt":"2020-02-20T03:26:13Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/4206#issuecomment-588590646","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU4ODU5MTc2NQ==","author":{"login":"trevorsm7"},"authorAssociation":"CONTRIBUTOR","body":"Yeah, this is just an internal unit testing utility. Not really high priority. I just noticed it was odd while I was working on the hash.pyx tests.","createdAt":"2020-02-20T03:31:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/4206#issuecomment-588591765","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDU4ODU5MjU5MQ==","author":{"login":"trevorsm7"},"authorAssociation":"CONTRIBUTOR","body":"I looked up `unpackbits` while I was writing the description, and I agree that should work.","createdAt":"2020-02-20T03:35:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/4206#issuecomment-588592591","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc5ODk2Mjc1MA==","author":{"login":"github-actions"},"authorAssociation":"NONE","body":"This issue has been labeled `inactive-90d` due to no recent activity in the past 90 days. Please close this issue if no further response or action is needed. Otherwise, please respond with a comment indicating any updates or changes to the original issue and/or confirm this issue still needs to be addressed.","createdAt":"2021-03-14T19:14:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/4206#issuecomment-798962750","viewerDidAuthor":false}],"createdAt":"2020-02-20T03:05:49Z","id":"MDU6SXNzdWU1NjgwMTk3MzE=","labels":[{"id":"MDU6TGFiZWw1OTk2MjY1NTk=","name":"bug","description":"Something isn't working","color":"d73a4a"},{"id":"MDU6TGFiZWwxMDE2MzMyOTQ4","name":"good first issue","description":"Good for newcomers","color":"7057ff"},{"id":"MDU6TGFiZWwxMDE2MzQyNTY3","name":"tests","description":"Unit testing for project","color":"204ea3"},{"id":"MDU6TGFiZWwxMTM5NzQxMjEz","name":"cuDF (Python)","description":"Affects Python cuDF API.","color":"1d76db"}],"milestone":null,"number":4206,"projectCards":[{"project":{"name":"Bug Squashing"},"column":{"name":"Needs prioritizing"}}],"projectItems":[],"reactionGroups":[],"state":"OPEN","title":"[BUG] expand_bits_to_bytes could be improved by returning ndarray of np.bool","updatedAt":"2024-05-29T19:43:27Z","url":"https://github.com/rapidsai/cudf/issues/4206"}
