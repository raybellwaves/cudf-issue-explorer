{"assignees":[{"id":"MDQ6VXNlcjE2MDA1Njkw","login":"vuule","name":"Vukasin Milovanovic"}],"author":{"id":"MDQ6VXNlcjE0ODc2NTg1","is_bot":false,"login":"divyegala","name":"Divye Gala"},"body":"Reference thread: https://github.com/rapidsai/cudf/pull/13795#discussion_r1373437533\r\n\r\nError:\r\n```/home/nfs/dgala/cudf/cpp/examples/nested_types/deduplication.cpp: In function 'cudf::io::table_with_metadata read_json(std::string_view)':\r\n/home/nfs/dgala/cudf/cpp/examples/nested_types/deduplication.cpp:66:52: error: no matching function for call to 'cudf::io::source_info::source_info(std::string_view&)'\r\n   66 |   auto source_info = cudf::io::source_info(filepath);```","closed":false,"closedAt":null,"comments":[{"id":"IC_kwDOBWUGps5sNMqD","author":{"login":"bdice"},"authorAssociation":"CONTRIBUTOR","body":"Looks like there are a bunch of `explicit` constructors for `source_info` from `std::string const&`, `char const*`, etc., and it happens to be missing one for `string_view`.\r\n\r\nhttps://github.com/rapidsai/cudf/blob/8e1ef05b2b96775ce7e1a2f22894ec7a8ebb65a4/cpp/include/cudf/io/types.hpp#L306","createdAt":"2023-11-16T22:14:30Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/14413#issuecomment-1815399043","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps5sNNe3","author":{"login":"bdice"},"authorAssociation":"CONTRIBUTOR","body":"@vuule Do you have feedback on this? If I understand correctly, we might be able to replace several of the existing constructors with one for `std::string_view`.","createdAt":"2023-11-16T22:17:08Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"EYES","users":{"totalCount":1}}],"url":"https://github.com/rapidsai/cudf/issues/14413#issuecomment-1815402423","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps5sNjQp","author":{"login":"vuule"},"authorAssociation":"CONTRIBUTOR","body":"the source_info constructors are a scary place, because two completely different input types can be represented with the same object. Namely, a buffer of characters could be a file path or the actual file content. Currently the supported types are slightly limited to reduce the chance of surprising overload resolutions for the user.\r\nThat said, I'm surprised passing string_view does not work. I'll take a look.","createdAt":"2023-11-16T23:28:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/14413#issuecomment-1815491625","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps5sNnSB","author":{"login":"vuule"},"authorAssociation":"CONTRIBUTOR","body":"Now I remember, string implicitly converts to string_view, not the other way around. Makes sense.\r\nThe constructors need more clean up, but I do agree that we could add string_view and deprecate string and char* ones :+1: ","createdAt":"2023-11-16T23:48:11Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/14413#issuecomment-1815508097","viewerDidAuthor":false}],"createdAt":"2023-11-14T19:47:51Z","id":"I_kwDOBWUGps520aSA","labels":[{"id":"MDU6TGFiZWw1OTk2MjY1NTk=","name":"bug","description":"Something isn't working","color":"d73a4a"},{"id":"MDU6TGFiZWwxMDEzOTg3MzUy","name":"0 - Backlog","description":"In queue waiting for assignment","color":"d4c5f9"},{"id":"MDU6TGFiZWwxMTM5NzQwNjY2","name":"libcudf","description":"Affects libcudf (C++/CUDA) code.","color":"c5def5"},{"id":"MDU6TGFiZWwxMTg1MjQ0MTQy","name":"cuIO","description":"cuIO issue","color":"fef2c0"}],"milestone":null,"number":14413,"projectCards":[],"projectItems":[],"reactionGroups":[],"state":"OPEN","title":"`read_json` does not compile if using `std::string_view` instead of `std::string`","updatedAt":"2023-12-14T18:47:21Z","url":"https://github.com/rapidsai/cudf/issues/14413"}
