{"assignees":[{"id":"MDQ6VXNlcjExMjY5ODE=","login":"wence-","name":"Lawrence Mitchell"}],"author":{"id":"MDQ6VXNlcjExMjY5ODE=","is_bot":false,"login":"wence-","name":"Lawrence Mitchell"},"body":"**Describe the bug**\r\n\r\nWhen performing `loc`-based setitem, pandas aligns the indices of the rvalue to match that of the lvalue. Consequently, the indexed lvalue and rvalue don't have to have the same shape (or even match indices).\r\n\r\n```python\r\nimport pandas as pd\r\ns = pd.Series([1, 2, 3], index=['a', 'b', 'c'])\r\no1 = pd.Series([5, 6, 7], index=['a', 'b', 'c'])\r\no2 = pd.Series([10])\r\ns.loc[['a', 'c']] = o1\r\ns # => [5, 2, 7]\r\ns.loc[['a', 'b', 'c']] = o2\r\ns # => [Nan, Nan, Nan]\r\n```\r\n\r\nIn contrast, cudf complains in both cases.\r\n\r\nFor the former: `ValueError: Size mismatch: cannot set value of size 3 to indexing result of size 2`\r\n\r\nFor the latter: `align_to_index` fails (because the int index cannot be merged with the string index). If `o2` has a string index, it fails because the pruned aligned series is not the right length.\r\n\r\n**Expected behavior**\r\n\r\nProbably this should behave as pandas. I think the case where the index types are different will probably need to be special-cased.","closed":false,"closedAt":null,"comments":[],"createdAt":"2023-03-29T14:38:07Z","id":"I_kwDOBWUGps5iG00X","labels":[{"id":"MDU6TGFiZWw1OTk2MjY1NTk=","name":"bug","description":"Something isn't working","color":"d73a4a"},{"id":"MDU6TGFiZWwxMTM5NzQxMjEz","name":"cuDF (Python)","description":"Affects Python cuDF API.","color":"1d76db"},{"id":"MDU6TGFiZWwyNTQ2NTIxMDI0","name":"improvement","description":"Improvement / enhancement to an existing function","color":"bfd4f2"}],"milestone":{"number":5,"title":"Pandas API Alignment and Coverage","description":"","dueOn":null},"number":13031,"projectCards":[],"projectItems":[],"reactionGroups":[],"state":"OPEN","title":"[BUG] loc-based setitem with dataframe/series as rvalue doesn't match pandas","updatedAt":"2023-05-02T10:56:02Z","url":"https://github.com/rapidsai/cudf/issues/13031"}
