{"assignees":[],"author":{"id":"MDQ6VXNlcjc0MTY5MzU=","is_bot":false,"login":"ttnghia","name":"Nghia Truong"},"body":"When converting floating point types to fixed point types, the casting operations are just blindly scaling the input values and then casting to integer without checking whether the scaled values are too big to be stored in the target integer types.\r\n\r\nProbably a more proper way to do casting here is to check for underflow/overflow and nullify the output accordingly.","closed":false,"closedAt":null,"comments":[{"id":"IC_kwDOBWUGps5_dJfp","author":{"login":"pmattione-nvidia"},"authorAssociation":"CONTRIBUTOR","body":"what if we do fixed-point -> float, and we exceed e.g. DBL_MAX.  Do we want null here too, or return a double with value infinity?","createdAt":"2024-05-29T22:14:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/15884#issuecomment-2138347497","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps5_dUjN","author":{"login":"davidwendt"},"authorAssociation":"CONTRIBUTOR","body":"Creating nulls for overflow is not something we do in general for other operations (e.g. casting float to integer). Usually nulls identify unvalid input rows and are not used to communicate any operation exceptions in this way. Just wanted to point this out. Perhaps an exception is needed for fixed-point.","createdAt":"2024-05-29T23:04:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/15884#issuecomment-2138392781","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps5_dW1q","author":{"login":"ttnghia"},"authorAssociation":"CONTRIBUTOR","body":"I agree with that. Yes, nullifying the output rows may not be a generic solution to fix all cases. A more comprehensive solution is probably to return a boolean value after nullifying the output rows indicating whether such replacements have happened.\r\n\r\nFYI, in Spark, we either choose to nullify the output rows or throw an exception depending on what the user wants (through a config value). ","createdAt":"2024-05-29T23:14:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/15884#issuecomment-2138402154","viewerDidAuthor":false}],"createdAt":"2024-05-29T21:44:15Z","id":"I_kwDOBWUGps6KifO2","labels":[{"id":"MDU6TGFiZWw1OTk2MjY1NTk=","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":15884,"projectCards":[],"projectItems":[],"reactionGroups":[],"state":"OPEN","title":"[BUG] Converting from numeric types to fixed point types does not handle underflow/overflow","updatedAt":"2024-05-29T23:14:23Z","url":"https://github.com/rapidsai/cudf/issues/15884"}
