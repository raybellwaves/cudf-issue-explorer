{"assignees":[{"id":"MDQ6VXNlcjMxOTA0MDU=","login":"shwina","name":"Ashwin Srinath"}],"author":{"id":"MDQ6VXNlcjE5OTQ5MjA3","is_bot":false,"login":"ayushdg","name":"Ayush Dattagupta"},"body":"**Is your feature request related to a problem? Please describe.**\r\nAbility to create a list of struct columns using the `collect` agg via groupby\r\n\r\n**Describe the solution you'd like**\r\n```python\r\ndf = cudf.DataFrame(\r\n    {\r\n        'a':['aa','aa','cc'],\r\n        'd':[{\"b\": '1', \"c\": \"one\"}, {\"b\": '2', \"c\": \"two\"}, {\"b\": '3', \"c\": \"one\"}]\r\n     }\r\n)\r\n\r\ndf.groupby('a').collect()\r\n\r\n\td\r\na\t\r\naa\t[{'b': '1', 'c': 'one'}, {'b': '2', 'c': 'two'}]\r\ncc\t[{'b': '3', 'c': 'one'}]\r\n```\r\n\r\n**Describe alternatives you've considered**\r\nN/A \r\n\r\n**Additional context**\r\nAdd any other context, code examples, or references to existing implementations about the feature request here.\r\n","closed":false,"closedAt":null,"comments":[{"id":"MDEyOklzc3VlQ29tbWVudDg2MTgyMjQ5NQ==","author":{"login":"quasiben"},"authorAssociation":"MEMBER","body":"I thought this is already supported:\r\n\r\n```python\r\nIn [3]: df = cudf.DataFrame(\r\n   ...:     {\r\n   ...:         'a':['aa','aa','cc'],\r\n   ...:         'd':[{\"b\": '1', \"c\": \"one\"}, {\"b\": '2', \"c\": \"two\"}, {\"b\": '3', \"c\": \"one\"}]\r\n   ...:      }\r\n   ...: )\r\n\r\nIn [4]: df.groupby('a').collect()\r\n   ...:\r\nOut[4]:\r\n                                                   d\r\na\r\naa  [{'0': '1', '1': 'one'}, {'0': '2', '1': 'two'}]\r\ncc                          [{'0': '3', '1': 'one'}]\r\n```","createdAt":"2021-06-15T20:51:09Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/8520#issuecomment-861822495","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg2MTgyNTAwNQ==","author":{"login":"ayushdg"},"authorAssociation":"MEMBER","body":"Based on the discussion in #8474 it seems like it was not supported but working anyway which was resolved in #8499 ","createdAt":"2021-06-15T20:55:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/8520#issuecomment-861825005","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg2MTgzNzk3NA==","author":{"login":"quasiben"},"authorAssociation":"MEMBER","body":"Are you ok if we close ?","createdAt":"2021-06-15T21:17:34Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/8520#issuecomment-861837974","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg2MTg0MTgzNQ==","author":{"login":"ayushdg"},"authorAssociation":"MEMBER","body":"@quasiben Sorry for not clarifying further. The resolution in #8499 was disallowing aggregations on Struct Columns, so this is no longer supported. ","createdAt":"2021-06-15T21:20:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/8520#issuecomment-861841835","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg3ODUwODc0MA==","author":{"login":"beckernick"},"authorAssociation":"MEMBER","body":"It sounds like this was disallowed because it was erroneously going down a codepath meant for string aggregations (and thus potentially brittle when used with structs/lists). \r\n\r\n@ayushdg is the expectation that these operations would behave as before, but by going down a well-tested codepath?","createdAt":"2021-07-12T18:44:31Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/8520#issuecomment-878508740","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg3ODUwOTgzMw==","author":{"login":"ayushdg"},"authorAssociation":"MEMBER","body":"> @ayushdg is the expectation that these operations would behave as before, but by going down a well-tested codepath?\r\n\r\nYup, that's the expectation.","createdAt":"2021-07-12T18:46:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/8520#issuecomment-878509833","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg3ODU4Nzk5MA==","author":{"login":"shwina"},"authorAssociation":"CONTRIBUTOR","body":"cc: @vyasr (just FYI), as I think we disabled these aggs on struct columns on one of your groupby cleanup PRs","createdAt":"2021-07-12T20:54:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/8520#issuecomment-878587990","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDg3OTQ4Nzg3OQ==","author":{"login":"vyasr"},"authorAssociation":"CONTRIBUTOR","body":"Perhaps you're thinking of [these changes](https://github.com/rapidsai/cudf/pull/7731/files#diff-455db1b90348b170b8f09780ea1d04001247b8190b77fe0010ad725a5b2c5b2f) on #7731? Prior to this, there were a number of dtypes for which unsupported aggregations weren't being checked.","createdAt":"2021-07-14T00:19:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/8520#issuecomment-879487879","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps45xqCq","author":{"login":"github-actions"},"authorAssociation":"NONE","body":"This issue has been labeled `inactive-90d` due to no recent activity in the past 90 days. Please close this issue if no further response or action is needed. Otherwise, please respond with a comment indicating any updates or changes to the original issue and/or confirm this issue still needs to be addressed.","createdAt":"2021-11-15T21:03:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/8520#issuecomment-969318570","viewerDidAuthor":false}],"createdAt":"2021-06-15T16:41:12Z","id":"MDU6SXNzdWU5MjE1OTYzOTk=","labels":[{"id":"MDU6TGFiZWw1OTk2MjY1NjE=","name":"feature request","description":"New feature or request","color":"a2eeef"},{"id":"MDU6TGFiZWwxMTM5NzQxMjEz","name":"cuDF (Python)","description":"Affects Python cuDF API.","color":"1d76db"}],"milestone":{"number":2,"title":"List and Struct data types and operations","description":"","dueOn":null},"number":8520,"projectCards":[{"project":{"name":"Feature Planning"},"column":{"name":"Needs prioritizing"}}],"projectItems":[],"reactionGroups":[],"state":"OPEN","title":"[FEA] Support groupby collect agg on struct columns","updatedAt":"2024-02-23T18:42:24Z","url":"https://github.com/rapidsai/cudf/issues/8520"}
