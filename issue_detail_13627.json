{"assignees":[],"author":{"id":"MDQ6VXNlcjEyNzI1MTEx","is_bot":false,"login":"GregoryKimball","name":"Gregory Kimball"},"body":"During the 23.06 release, we encountered several important Parquet and ORC writer issues that risked data corruption. These issues included:\r\n* Rare failure with page size estimator (PQ writer, [Report](https://github.com/rapidsai/cudf/issues/13250), [Fix](https://github.com/rapidsai/cudf/pull/13364))\r\n* Failure with >1GB tables (PQ writer, [Report](https://github.com/rapidsai/cudf/issues/13414), [Fix](https://github.com/rapidsai/cudf/pull/13438)) \r\n* Failure with 10k nulls followed by >5 valid values (ORC Writer, [Report](https://github.com/rapidsai/cudf/issues/13460), [Fix](https://github.com/rapidsai/cudf/pull/13466))\r\n\r\nAfter discussion with the team we agreed on these additions to our testing suite to help prevent similar issues in the future:\r\n* Based on test files in [parquet-testing/data](https://github.com/apache/parquet-testing/tree/b2e7cc755159196e3a068c8594f7acbaecfdaaac/data), verify that \"read\" versus \"read-write-read\" result in identical tables\r\n* Based on test files in [orc/examples](https://github.com/apache/orc/tree/main/examples), verify that \"read\" versus \"read-write-read\" result in identical tables\r\n* Based on test files in [parquet-testing/data](https://github.com/apache/parquet-testing/tree/b2e7cc755159196e3a068c8594f7acbaecfdaaac/data), verify that \"read\" versus \"read_with_Arrow-convert_to_cudf\" result in identical tables\r\n* Based on test files in [orc/examples](https://github.com/apache/orc/tree/main/examples), verify that \"read\" versus \"read_with_Arrow-convert_to_cudf\" result in identical tables\r\n\r\nNote: please also see (#12739), for reader benchmarks, verify that the roundtripped table matches the starting table\r\n","closed":false,"closedAt":null,"comments":[],"createdAt":"2023-06-27T19:58:33Z","id":"I_kwDOBWUGps5p9QeU","labels":[{"id":"MDU6TGFiZWw1OTk2MjY1NjE=","name":"feature request","description":"New feature or request","color":"a2eeef"},{"id":"MDU6TGFiZWwxMDEzOTg3MzUy","name":"0 - Backlog","description":"In queue waiting for assignment","color":"d4c5f9"},{"id":"MDU6TGFiZWwxMDE2MzQyNTY3","name":"tests","description":"Unit testing for project","color":"204ea3"},{"id":"MDU6TGFiZWwxMTM5NzQwNjY2","name":"libcudf","description":"Affects libcudf (C++/CUDA) code.","color":"c5def5"},{"id":"MDU6TGFiZWwxMTg1MjQ0MTQy","name":"cuIO","description":"cuIO issue","color":"fef2c0"},{"id":"MDU6TGFiZWwxNDA1MTQ2OTc1","name":"Spark","description":"Functionality that helps Spark RAPIDS","color":"7400ff"}],"milestone":{"number":22,"title":"Parquet continuous improvement","description":"","dueOn":null},"number":13627,"projectCards":[],"projectItems":[],"reactionGroups":[],"state":"OPEN","title":"[FEA] Add Parquet and ORC unit tests based on Apache sample files","updatedAt":"2024-02-16T23:37:34Z","url":"https://github.com/rapidsai/cudf/issues/13627"}
