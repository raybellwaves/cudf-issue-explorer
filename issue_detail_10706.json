{"assignees":[],"author":{"id":"MDQ6VXNlcjE1MzgxNjU=","is_bot":false,"login":"vyasr","name":"Vyas Ramasubramani"},"body":"Currently the contents of cudautils.py can be grouped into three sets of functionality:\r\n1. The first set of 7 functions are all targeted at supporting `find_first` and `find_last`, which in turn are used respectively by the `find_first_value` and `find_last_value` methods of Column objects.\r\n2. The second set of functions 4 around window sizes are used by the rolling calculations in rolling.py.\r\n3. The third pair of 2 functions is used for UDF compilation.\r\n\r\nThe functions in group 3 are necessary but should probably be moved to `core/udf/utils.py`. The remaining functions should be possible to remove altogether, but they may require some additional functionality to be added to libcudf. For instance, `find_first_value` and `find_last_value` may be possible to implement using libcudf's `lower_bound` followed by an equality check, and similarly `find_last_value` could be replaced with `upper_bound`, accounting for all of group 1. For group 2 functions I am not certain if the necessary functionality exists in libcudf's roling aggregations, so we may need to do a little more engineering there first.","closed":false,"closedAt":null,"comments":[{"id":"IC_kwDOBWUGps5B5Hh1","author":{"login":"vyasr"},"authorAssociation":"CONTRIBUTOR","body":"@bdice I think you did some recent investigations here, please add any color that I'm missing.","createdAt":"2022-04-21T17:22:26Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/10706#issuecomment-1105492085","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps5B5Km2","author":{"login":"bdice"},"authorAssociation":"CONTRIBUTOR","body":"I agree with the proposal above. There may be a catch with circular imports for group 3 / UDF helpers.","createdAt":"2022-04-21T17:37:30Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/10706#issuecomment-1105504694","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps5B5_ak","author":{"login":"brandon-b-miller"},"authorAssociation":"CONTRIBUTOR","body":"I think `find_first` is used in the `iloc` codepath. That part of the code needs to be reworked anyways since it's not producing the right result in some cases.\r\n\r\nLet me know if I may be of assistance untangling anything in the UDF area @bdice ","createdAt":"2022-04-21T20:22:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/10706#issuecomment-1105720996","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps5CFKKn","author":{"login":"vyasr"},"authorAssociation":"CONTRIBUTOR","body":"> I think `find_first` is used in the `iloc` codepath. That part of the code needs to be reworked anyways since it's not producing the right result in some cases.\r\n\r\nYup, I think that `Column.find_first_value` gets invoked by the `loc_to_iloc` translation. There's also #10657 about trying to unify DataFrame and Series loc/iloc further, so maybe all of the relevant issues could be resolved in one fell swoop.\r\n","createdAt":"2022-04-25T14:26:32Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/10706#issuecomment-1108648615","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps5Dy6B1","author":{"login":"github-actions"},"authorAssociation":"NONE","body":"This issue has been labeled `inactive-30d` due to no recent activity in the past 30 days. Please close this issue if no further response or action is needed. Otherwise, please respond with a comment indicating any updates or changes to the original issue and/or confirm this issue still needs to be addressed. This issue will be labeled `inactive-90d` if there is no activity in the next 60 days.","createdAt":"2022-05-25T15:12:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/10706#issuecomment-1137418357","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps5I-Qa8","author":{"login":"github-actions"},"authorAssociation":"NONE","body":"This issue has been labeled `inactive-90d` due to no recent activity in the past 90 days. Please close this issue if no further response or action is needed. Otherwise, please respond with a comment indicating any updates or changes to the original issue and/or confirm this issue still needs to be addressed.","createdAt":"2022-08-23T16:03:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/10706#issuecomment-1224279740","viewerDidAuthor":false}],"createdAt":"2022-04-21T17:21:52Z","id":"I_kwDOBWUGps5IM4QM","labels":[{"id":"MDU6TGFiZWwxMTM5NzQwNjY2","name":"libcudf","description":"Affects libcudf (C++/CUDA) code.","color":"c5def5"},{"id":"MDU6TGFiZWwxMTM5NzQxMjEz","name":"cuDF (Python)","description":"Affects Python cuDF API.","color":"1d76db"},{"id":"MDU6TGFiZWwyNTQ2NTIxMDI0","name":"improvement","description":"Improvement / enhancement to an existing function","color":"bfd4f2"}],"milestone":null,"number":10706,"projectCards":[{"project":{"name":"Other Issues"},"column":{"name":"Needs prioritizing"}}],"projectItems":[],"reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"state":"OPEN","title":"Remove cudautils.py","updatedAt":"2024-02-23T18:42:45Z","url":"https://github.com/rapidsai/cudf/issues/10706"}
