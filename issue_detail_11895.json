{"assignees":[],"author":{"id":"MDQ6VXNlcjI2MTY5Nzcx","is_bot":false,"login":"miguelusque","name":"Miguel Mart√≠nez"},"body":"**Is your feature request related to a problem? Please describe.**\r\nHi!\r\n\r\nWhile porting some code to Pandas, I have noticed that `normalize` parameter is not supported in `cudf.crosstab`.\r\n\r\n**Describe the solution you'd like**\r\nI would like to have `normalize` parameter supported. Thanks!!!\r\n\r\n**Describe alternatives you've considered**\r\nI have performed the normalization by hand. While doing it, I have also found another feature missing. Please see issue https://github.com/rapidsai/cudf/issues/11894\r\n\r\n**Additional context**\r\nPlease, find below the code that fails, and the workaround I have implemented:\r\n\r\n```python\r\nimport cudf\r\nimport pandas as pd\r\n\r\nprint(cudf.__version__, pd.__version__, '\\n')\r\n\r\nfeatures = {'x': ['x1', 'x1', 'x2', 'x2', 'x2', 'x1', 'x2'],\r\n            'y': ['y1', 'y2', 'y1', 'y2', 'y3', 'y1', 'y3']}\r\n\r\npdf = pd.DataFrame(features)\r\npdf = pd.crosstab(index = pdf.x, columns = pdf.y, normalize='index')\r\n\r\ngdf = cudf.DataFrame(features)\r\ngdf = cudf.crosstab(index = gdf.x, columns = gdf.y, normalize='index')\r\n\r\n# The code above fails as follows:\r\n#     ---------------------------------------------------------------------------\r\n#     NotImplementedError                       Traceback (most recent call last)\r\n#     /tmp/ipykernel_1281/4238469792.py in <module>\r\n#           1 gdf = cudf.DataFrame(features)\r\n#     ----> 2 gdf = cudf.crosstab(index = gdf.x, columns = gdf.y, normalize='index')\r\n\r\n#     /opt/conda/envs/rapids/lib/python3.9/site-packages/cudf/core/reshape.py in crosstab(index, columns, values, rownames, colnames, aggfunc, margins, margins_name, dropna, normalize)\r\n#        1252     \"\"\"\r\n#        1253     if normalize is not False:\r\n#     -> 1254         raise NotImplementedError(\"normalize is not supported yet\")\r\n#        1255 \r\n#        1256     if values is None and aggfunc is not None:\r\n\r\n#     NotImplementedError: normalize is not supported yet\r\n\r\ngdf = cudf.crosstab(index = gdf.x, columns = gdf.y)\r\n\r\n# The following code workarounds feature request https://github.com/rapidsai/cudf/issues/11894\r\ntmp = gdf.sum(axis=1)\r\nfor col in gdf.columns:\r\n    gdf[col] = gdf[col]/tmp\r\n\r\nprint(pdf, '\\n', gdf)\r\n```\r\n","closed":false,"closedAt":null,"comments":[],"createdAt":"2022-10-11T08:19:37Z","id":"I_kwDOBWUGps5TspQ_","labels":[{"id":"MDU6TGFiZWw1OTk2MjY1NjE=","name":"feature request","description":"New feature or request","color":"a2eeef"},{"id":"MDU6TGFiZWwxMTM5NzQxMjEz","name":"cuDF (Python)","description":"Affects Python cuDF API.","color":"1d76db"}],"milestone":null,"number":11895,"projectCards":[{"project":{"name":"Feature Planning"},"column":{"name":"Needs prioritizing"}}],"projectItems":[],"reactionGroups":[],"state":"OPEN","title":"[FEA] Support 'normalize' parameter in cudf.crosstab","updatedAt":"2022-10-11T13:30:43Z","url":"https://github.com/rapidsai/cudf/issues/11895"}
