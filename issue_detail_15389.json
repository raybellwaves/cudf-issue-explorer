{"assignees":[],"author":{"id":"MDQ6VXNlcjIxOTczNDY0","is_bot":false,"login":"gaohao95","name":""},"body":"**Is your feature request related to a problem? Please describe.**\r\nI wish libcudf's parquet reader reports the number of rows read per file.\r\n\r\nConsider the following example, \r\n```c++\r\n  std::vector<std::string> file_paths;  // defined elsewhere\r\n  std::vector<std::string> column_names;  // defined elsewhere\r\n\r\n  auto source  = cudf::io::source_info(file_paths);\r\n  auto options = cudf::io::parquet_reader_options::builder(source);\r\n  options.columns(column_names);\r\n  auto result = cudf::io::read_parquet(options);\r\n```\r\n\r\nHere, `result` is of type [`table_with_metadata`](https://github.com/rapidsai/cudf/blob/branch-24.02/cpp/include/cudf/io/types.hpp#L249), but the metadata doesn't contain the number of rows read from each file. I wish libcudf can add this functionality.\r\n\r\n**Describe the solution you'd like**\r\nReport the number of rows read from each file in `table_with_metadata`.\r\n\r\n**Describe alternatives you've considered**\r\nI have tried `cudf::io::read_parquet_metadata` out-of-band, like the following snippet.\r\n\r\n```c++\r\n  std::vector<cudf::size_type> rows_per_file;\r\n  rows_per_file.reserve(file_paths.size());\r\n\r\n  for (auto const& file_path : file_paths) {\r\n    auto file_source = cudf::io::source_info(file_path);\r\n    auto metadata    = cudf::io::read_parquet_metadata(file_source);\r\n    rows_per_file.push_back(metadata.num_rows());\r\n  }\r\n  result.rows_per_file = std::move(rows_per_file);\r\n```\r\n\r\nBut this has nontrivial overhead in my use case. I believe we can get it for free as part of the Parquet reading process, since the Parquet reader needs to decode the file footers anyway.\r\n","closed":false,"closedAt":null,"comments":[],"createdAt":"2024-03-26T06:34:07Z","id":"I_kwDOBWUGps6Dkdlw","labels":[{"id":"MDU6TGFiZWw1OTk2MjY1NjE=","name":"feature request","description":"New feature or request","color":"a2eeef"},{"id":"MDU6TGFiZWwxMTM5NzQwNjY2","name":"libcudf","description":"Affects libcudf (C++/CUDA) code.","color":"c5def5"},{"id":"MDU6TGFiZWwxMTg1MjQ0MTQy","name":"cuIO","description":"cuIO issue","color":"fef2c0"}],"milestone":{"number":22,"title":"Parquet continuous improvement","description":"","dueOn":null},"number":15389,"projectCards":[],"projectItems":[],"reactionGroups":[],"state":"OPEN","title":"[FEA] Report the number of rows read per file in libcudf's Parquet reader ","updatedAt":"2024-03-26T20:28:45Z","url":"https://github.com/rapidsai/cudf/issues/15389"}
