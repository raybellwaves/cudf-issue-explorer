{"assignees":[],"author":{"id":"MDQ6VXNlcjE1MzgxNjU=","is_bot":false,"login":"vyasr","name":"Vyas Ramasubramani"},"body":"**Is your feature request related to a problem? Please describe.**\r\nSome C++ test files are written to test detail APIs rather than public APIs. One particular example that was brought up in https://github.com/rapidsai/cudf/pull/12888#discussion_r1132719780 is [`detail_gather_tests.cu`](https://github.com/rapidsai/cudf/blob/branch-23.04/cpp/tests/copying/detail_gather_tests.cu). Ideally we should not be testing detail APIs directly, only public APIs. In practice, we should minimize cases where we must test detail APIs directly.\r\n\r\n**Describe the solution you'd like**\r\nWe should evaluate removing tests of detail APIs. In cases where the associated public APIs are not sufficiently tested, the detail tests should be converted to test the public APIs. In other cases where the detail tests are purely redundant they should be removed. If detail APIs are being called as part of a sequence of cudf calls in a more complex test of public APIs, those calls should be rewritten to use public APIs. The remainder should be cases where detail APIs lack an exact public analog and testing the underlying APIs is valuable. We will need to assess those tests carefully.\r\n","closed":false,"closedAt":null,"comments":[{"id":"IC_kwDOBWUGps5XamCE","author":{"login":"karthikeyann"},"authorAssociation":"CONTRIBUTOR","body":"Some parts of large code/algorithm, are available as detail APIs, but not as public APIs, and they could use some fundamental unit tests. These unit tests helps to build the top level public APIs without any errors, and also helps figuring out the errors easily when some tests fail.\r\nDetail APIs are exposed in include/cudf/ headers, so, it is good to test them too, unless it's exactly identical to public APIs (except the stream parameter).","createdAt":"2023-03-13T17:27:25Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/12929#issuecomment-1466589316","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps5XoLy5","author":{"login":"vyasr"},"authorAssociation":"CONTRIBUTOR","body":"I agree, my original wording was probably a bit too strong. I don't necessarily think that we should remove _all_ tests of detail APIs, but we should be much more judicious about using them if tests of public APIs would be sufficient. Where possible, we should convert them to testing the corresponding public APIs (if one exists).","createdAt":"2023-03-15T14:52:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":2}}],"url":"https://github.com/rapidsai/cudf/issues/12929#issuecomment-1470151865","viewerDidAuthor":false}],"createdAt":"2023-03-13T15:37:04Z","id":"I_kwDOBWUGps5gqeBn","labels":[{"id":"MDU6TGFiZWw1OTk2MjY1NjE=","name":"feature request","description":"New feature or request","color":"a2eeef"},{"id":"MDU6TGFiZWwxMDEzOTg3MzUy","name":"0 - Backlog","description":"In queue waiting for assignment","color":"d4c5f9"},{"id":"MDU6TGFiZWwxMTM5NzQwNjY2","name":"libcudf","description":"Affects libcudf (C++/CUDA) code.","color":"c5def5"}],"milestone":{"number":26,"title":"Helps developer velocity","description":"","dueOn":null},"number":12929,"projectCards":[],"projectItems":[],"reactionGroups":[{"content":"HEART","users":{"totalCount":1}}],"state":"OPEN","title":"[FEA] Investigate removing C++ tests of detail APIs","updatedAt":"2024-02-23T17:59:08Z","url":"https://github.com/rapidsai/cudf/issues/12929"}
