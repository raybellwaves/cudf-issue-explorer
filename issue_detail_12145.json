{"assignees":[],"author":{"id":"MDQ6VXNlcjU2MDczMzA=","is_bot":false,"login":"mythrocks","name":"MithunR"},"body":"When `cudf::io::read_csv()` encounters two consecutive field delimiters within a row, it deems the corresponding string column value as null. E.g.:\r\n```\r\na,,c\r\nd,,f\r\n```\r\nReading the input above via `read_csv()` produces rows `{a,null,c}` and `{d,null,f}`. This is conformant with Spark's CSV reader (and presumably Pandas).\r\n\r\nIt would be useful if the column value could be optionally interpreted as an empty string (`\"\"`) instead. This would permit support for reading [Hive delimited text](https://github.com/NVIDIA/spark-rapids/issues/7069), where empty strings are empty by default.","closed":false,"closedAt":null,"comments":[{"id":"IC_kwDOBWUGps5OZMFt","author":{"login":"davidwendt"},"authorAssociation":"CONTRIBUTOR","body":"I believe you can post process this with `cudf::replace_nulls` with an empty string https://docs.rapids.ai/api/libcudf/stable/group__transformation__replace.html#gad359a898c2b11e70c3e33720259c5596\r\n\r\nTechnically you could also just remove the null mask. This assumes that null entries are created as empty strings with a corresponding validity bit set to 0.","createdAt":"2022-11-15T12:12:14Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/12145#issuecomment-1315225965","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps5Oa7tw","author":{"login":"mythrocks"},"authorAssociation":"CONTRIBUTOR","body":"> you can post process this with cudf::replace_nulls with an empty string\r\n\r\nThe snag there is that we can't then differentiate between a legitimately null string and an empty one.\r\nConsider that we have `csv_reader_options.set_na_values({\"\\N\"})` as is common in Spark/Hive. The second and third fields of the following input row cannot be represented via CUDF columns:\r\n```\r\nFirst,,\\N,Last\r\n```\r\nThe Hive format would treat the second field as empty (`\"\"`), and the third as `null`.","createdAt":"2022-11-15T18:04:16Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/12145#issuecomment-1315683184","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps5P-VE_","author":{"login":"vuule"},"authorAssociation":"CONTRIBUTOR","body":"This is surprising, I would expect `set_na_values` to impact this behavior. Checking if this is a bug.","createdAt":"2022-12-07T23:28:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/12145#issuecomment-1341739327","viewerDidAuthor":false}],"createdAt":"2022-11-15T08:43:23Z","id":"I_kwDOBWUGps5WY_aq","labels":[{"id":"MDU6TGFiZWw1OTk2MjY1NjE=","name":"feature request","description":"New feature or request","color":"a2eeef"},{"id":"MDU6TGFiZWwxMDEzOTg3MzUy","name":"0 - Backlog","description":"In queue waiting for assignment","color":"d4c5f9"},{"id":"MDU6TGFiZWwxMTM5NzQwNjY2","name":"libcudf","description":"Affects libcudf (C++/CUDA) code.","color":"c5def5"},{"id":"MDU6TGFiZWwxMTg1MjQ0MTQy","name":"cuIO","description":"cuIO issue","color":"fef2c0"}],"milestone":{"number":12,"title":"CSV continuous improvement","description":"","dueOn":null},"number":12145,"projectCards":[{"project":{"name":"Feature Planning"},"column":{"name":"Needs prioritizing"}},{"project":{"name":"v23.02 Release"},"column":{"name":"Issue-Needs prioritizing"}}],"projectItems":[],"reactionGroups":[],"state":"OPEN","title":"[FEA] `csv_reader_options` to read empty strings as blank (i.e. `\"\"`), not `null`.","updatedAt":"2023-04-02T22:38:48Z","url":"https://github.com/rapidsai/cudf/issues/12145"}
