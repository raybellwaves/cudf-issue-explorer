{"assignees":[],"author":{"id":"MDQ6VXNlcjIzMTIwODM3","is_bot":false,"login":"arpan-das-astrophysics","name":"Arpan Das"},"body":"Hello, I am trying to store some imaginary numbers as a cudf dataframe column. Each column cell is a list of imaginary numbers. I am wondering what would be the most efficient way to do it as cudf dataframe doesn't support imaginary numbers? Seperating the real and imaginary part is what I am doing now but this is a huge dataset and it is taking a lot of time.","closed":false,"closedAt":null,"comments":[{"id":"IC_kwDOBWUGps5M7LzL","author":{"login":"shwina"},"authorAssociation":"CONTRIBUTOR","body":"> Seperating the real and imaginary part is what I am doing now but this is a huge dataset and it is taking a lot of time.\r\n\r\nAs we don't support a `complex` type in cuDF, unfortunately that's the best approach I can think of as well. I understand that things are further complicated because what you want is a `List[complex]` data type.\r\n\r\nCan you share an example of the kind of operations you wish to perform? Perhaps we can suggest adequate workarounds.\r\n","createdAt":"2022-10-25T13:42:00Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/11983#issuecomment-1290583243","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps5M7Ndp","author":{"login":"shwina"},"authorAssociation":"CONTRIBUTOR","body":"I imagine this is yet another use-case for something like [Awkward Arrays on the GPU](https://github.com/scikit-hep/awkward/issues/1658). FYI @gmarkall, and also I hope you don't mind the cc @jpivarski :) ","createdAt":"2022-10-25T13:46:57Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/11983#issuecomment-1290590057","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps5M7cWh","author":{"login":"arpan-das-astrophysics"},"authorAssociation":"NONE","body":"I have this dataformat where the \"DATA\" column values are list of imaginary numbers. I was trying to store them in similar way in cudf dataframe. I think I found another workaround, which is to convert the complex128 to strings so that cudf reads them as a list of strings and not complex numbers and when I read them back for some operation I convert them back to complex numbers.\r\n\r\n![Screen Shot 2022-10-25 at 4 21 28 PM](https://user-images.githubusercontent.com/23120837/197801290-429e958c-3825-4c7c-993e-db891b0ac420.png)\r\n","createdAt":"2022-10-25T14:30:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/11983#issuecomment-1290651041","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps5ORGou","author":{"login":"GregoryKimball"},"authorAssociation":"CONTRIBUTOR","body":"Hello @arpan-das-astrophysics you mentioned storing imaginary numbers as floats in #12104 and as strings here in #11983. Would you please share a bit more about the processing steps you would like to apply to the `List[complex]` data?","createdAt":"2022-11-14T05:09:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/11983#issuecomment-1313106478","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps5ORwGq","author":{"login":"arpan-das-astrophysics"},"authorAssociation":"NONE","body":"> Hello @arpan-das-astrophysics you mentioned storing imaginary numbers as floats in #12104 and as strings here in #11983. Would you please share a bit more about the processing steps you would like to apply to the `List[complex]` data?\r\n\r\nHi Gregory, thank you for looking into this. Initially I was using List[complex] however that is still memory efficient conversion. The best way I found is to cast the complex array into floats of adjacent (real,imag) which in principle shouldn't take any additional memory. I used `np.view(float32)` to cast the array into adjacent floats and then `tolist()` to store it in the dataframe. However, we are reading this column multiple times for several operations and it is not optimal to cast and recast every time. So it would be great if we can directly store the whole complex array without any conversion. ","createdAt":"2022-11-14T08:29:31Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/11983#issuecomment-1313276330","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps5PhCbL","author":{"login":"arpan-das-astrophysics"},"authorAssociation":"NONE","body":"Hi @GregoryKimball any update on this? \r\n\r\nAs an example, I have to run a big for loop to extract columns from a data frame where some columns are multidimensional array and some are even with complex numbers. As you can see extracting those columns making the for loop significantly and this is blocking the whole purpose of using cudF dataframe: \r\n\r\n![Screen Shot 2022-12-01 at 5 47 37 PM](https://user-images.githubusercontent.com/23120837/205111971-04e235a4-da6e-4baa-a264-1cfbc359105f.png)\r\n![Screen Shot 2022-12-01 at 5 48 43 PM](https://user-images.githubusercontent.com/23120837/205112027-ee12aee0-1901-4f3f-98a0-60726705bf93.png)\r\n","createdAt":"2022-12-01T16:51:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/11983#issuecomment-1334060747","viewerDidAuthor":false}],"createdAt":"2022-10-25T09:33:07Z","id":"I_kwDOBWUGps5UxHDv","labels":[{"id":"MDU6TGFiZWw1OTk2MjY1NjQ=","name":"question","description":"Further information is requested","color":"D4C5F9"},{"id":"MDU6TGFiZWwxMTM5NzQxMjEz","name":"cuDF (Python)","description":"Affects Python cuDF API.","color":"1d76db"}],"milestone":null,"number":11983,"projectCards":[{"project":{"name":"Other Issues"},"column":{"name":"Needs prioritizing"}}],"projectItems":[],"reactionGroups":[],"state":"OPEN","title":"[FEA] Support imaginary numbers in cuDF dataframes","updatedAt":"2022-12-01T16:51:50Z","url":"https://github.com/rapidsai/cudf/issues/11983"}
