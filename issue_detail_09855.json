{"assignees":[{"id":"MDQ6VXNlcjQ1Nzk1OTkx","login":"davidwendt","name":"David Wendt"}],"author":{"id":"MDQ6VXNlcjkzNDA4NA==","is_bot":false,"login":"andygrove","name":"Andy Grove"},"body":"**Is your feature request related to a problem? Please describe.**\r\nFrom Spark, when we call `extract_re` we often are only interested in extracting a single group rather than all the groups in the pattern. We currently call `extract_re` which returns a `Table` and we then get the column we are interested in and discard the others. It would be more efficient if we could pass the column index to cuDF so that only one column needs instantiating.\r\n\r\n**Describe the solution you'd like**\r\nI would like a signature something like `extract_re(pattern, index)`.\r\n\r\n**Describe alternatives you've considered**\r\nNone\r\n\r\n**Additional context**\r\nNone\r\n","closed":false,"closedAt":null,"comments":[{"id":"IC_kwDOBWUGps469Zii","author":{"login":"davidwendt"},"authorAssociation":"CONTRIBUTOR","body":"Why include groups in the pattern that will not return anything?\r\nFor example, if you have the following pattern with 3 groups:\r\n```\r\n\"([a-z]*)-([0-9]*)-([A-Z]*)\"\r\n```\r\nand you only care about the 2nd group just change the pattern to remove the `( )` for the groups that are not needed.\r\n```\r\n\"[a-z]*-([0-9]*)-[A-Z]*\"\r\n```\r\n","createdAt":"2021-12-08T20:33:21Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/9855#issuecomment-989173922","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps469x_F","author":{"login":"andygrove"},"authorAssociation":"CONTRIBUTOR","body":"I cannot argue with the logic here, but this is just how the Spark function works and we have no control over how people invoke it. \r\n\r\nWe could potentially rewrite the regexp pattern in the plugin to remove unreferenced groups but I would be nervous about going that far.","createdAt":"2021-12-08T22:20:29Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/9855#issuecomment-989274053","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps47TOj1","author":{"login":"beckernick"},"authorAssociation":"MEMBER","body":"Is the goal to leverage information downstream in the DAG that indicates some of the capture groups weren't actually necessary for this execution?\r\n\r\nCould you share a bit about the use cases where this comes up? For example, I can imagine it coming up in exploratory data analysis. Curious to understand how common/significant this is.","createdAt":"2021-12-15T15:21:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/9855#issuecomment-994896117","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps47kF5N","author":{"login":"vyasr"},"authorAssociation":"CONTRIBUTOR","body":"I am also curious to understand this problem. From the original description it doesn't seem like the request is stemming from some complex workflow where some groups are \"discovered\" to be unnecessary, but rather to optimize user workflows even when users invoke the function with suboptimal regexes. Naively this seems like a use case where we should be aiming to educate users as to best practices for performance rather than optimizing additional code paths, i.e. we should be documenting that including unnecessary groups in the regex will impact performance. That would be consistent with a lot of our messaging around cuDF Python where there are often ways to do things with pandas that would translate to slow cuDF solutions, and we try to document and socialize knowledge about faster ways to do those things in cuDF without trying to optimize all the slower ways. Maybe I'm missing a key reason that this use case is different, though.","createdAt":"2021-12-22T06:20:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/9855#issuecomment-999317069","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps47lgWN","author":{"login":"andygrove"},"authorAssociation":"CONTRIBUTOR","body":"To add some more context to this request. Spark provides a SQL function [regexp_extract](https://spark.apache.org/docs/latest/api/python/reference/api/pyspark.sql.functions.regexp_extract.html) with the signature `regexp_extract(str, pattern, idx)`. This function was requested in [SPARK-8255](https://issues.apache.org/jira/browse/SPARK-8255) to expose the equivalent Java regexp functionality. It doesn't look like too much thought was given to the inefficiency of this approach. The function has existed since Spark 1.5.0 so it is likely that people are using it. We do support this function in the RAPIDS Accelerator for Spark already but it would be more efficient if we could just request a single group to be extracted.\r\n\r\n","createdAt":"2021-12-22T16:01:25Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/9855#issuecomment-999687565","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps48t1Ae","author":{"login":"github-actions"},"authorAssociation":"NONE","body":"This issue has been labeled `inactive-30d` due to no recent activity in the past 30 days. Please close this issue if no further response or action is needed. Otherwise, please respond with a comment indicating any updates or changes to the original issue and/or confirm this issue still needs to be addressed. This issue will be labeled `inactive-90d` if there is no activity in the next 60 days.","createdAt":"2022-01-21T16:07:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/9855#issuecomment-1018646558","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps5B426i","author":{"login":"github-actions"},"authorAssociation":"NONE","body":"This issue has been labeled `inactive-90d` due to no recent activity in the past 90 days. Please close this issue if no further response or action is needed. Otherwise, please respond with a comment indicating any updates or changes to the original issue and/or confirm this issue still needs to be addressed.","createdAt":"2022-04-21T16:08:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/9855#issuecomment-1105424034","viewerDidAuthor":false}],"createdAt":"2021-12-07T17:56:51Z","id":"I_kwDOBWUGps4__ilR","labels":[{"id":"MDU6TGFiZWw1OTk2MjY1NjE=","name":"feature request","description":"New feature or request","color":"a2eeef"},{"id":"MDU6TGFiZWwxMTM5NzQwNjY2","name":"libcudf","description":"Affects libcudf (C++/CUDA) code.","color":"c5def5"},{"id":"MDU6TGFiZWwxNTE1NjE2MjUz","name":"strings","description":"strings issues (C++ and Python)","color":"0e8a16"}],"milestone":null,"number":9855,"projectCards":[{"project":{"name":"Feature Planning"},"column":{"name":"Needs prioritizing"}}],"projectItems":[],"reactionGroups":[],"state":"OPEN","title":"[FEA] Add version of extract_re that takes an index","updatedAt":"2024-02-23T18:42:28Z","url":"https://github.com/rapidsai/cudf/issues/9855"}
