{"assignees":[],"author":{"id":"MDQ6VXNlcjE5MDEwNTk=","is_bot":false,"login":"abellina","name":"Alessandro Bellina"},"body":"In cuDF we build with object files that reference RMM headers to create memory resource, such as the pool_memory_resource.\r\n\r\nThere is a flag that is not being set in cuDF JNI `RMM_LOGGING_LEVEL` that appears to be causing extra logs when the [new pinned memory pool](https://github.com/rapidsai/cudf/pull/15255) is exhausted (we run out of pinned memory). In this case, RMM logs at `error` level: `maximum pool size was exceeded`.\r\n\r\nWe'd like to find a solution for 24.04. We are looking at other ways of setting the flag from spark-rapids-jni as well in the mean time.","closed":false,"closedAt":null,"comments":[{"id":"IC_kwDOBWUGps54_Yfu","author":{"login":"abellina"},"authorAssociation":"CONTRIBUTOR","body":"Related bug but in cpp: https://github.com/rapidsai/cudf/issues/15416","createdAt":"2024-04-01T14:51:06Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/15417#issuecomment-2029881326","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps54_cfI","author":{"login":"abellina"},"authorAssociation":"CONTRIBUTOR","body":"The issue with this flag not being set is that we get a `rmm_log.txt` with lines like this:\r\n```\r\n[ 61931][10:48:59:493968][error ] [A][Stream 0x0][Upstream 506799616B][FAILURE maximum pool size exceeded]\r\n```\r\neach time we run out of pinned memory. This is not desirable for production environments as our pool is meant to be opportunistic and these failures are really just going to result in pageable memory being allocated.","createdAt":"2024-04-01T14:59:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/15417#issuecomment-2029897672","viewerDidAuthor":false}],"createdAt":"2024-04-01T14:50:38Z","id":"I_kwDOBWUGps6EOo9-","labels":[{"id":"MDU6TGFiZWw1OTk2MjY1NTk=","name":"bug","description":"Something isn't working","color":"d73a4a"}],"milestone":null,"number":15417,"projectCards":[],"projectItems":[],"reactionGroups":[],"state":"OPEN","title":"[BUG] cuDF JNI does not set RMM_LOGGING_LEVEL","updatedAt":"2024-04-01T14:59:45Z","url":"https://github.com/rapidsai/cudf/issues/15417"}
