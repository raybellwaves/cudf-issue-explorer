{"assignees":[],"author":{"id":"MDQ6VXNlcjM5NDM3NjE=","is_bot":false,"login":"bdice","name":"Bradley Dice"},"body":"Following up from #13681 and #13612, there are some tasks I think can be done to clean up hashing code. I am opening this issue to be a tracker for the work we've deferred from other PRs.\r\n\r\n- Functions like `getblock32` can be reused by multiple hash functions. https://github.com/rapidsai/cudf/pull/13612/files#r1265587501\r\nAlso consider optimizing this to use `memcpy` or `if constexpr` on key type perhaps.\r\n- Functions like `rotate_bits_left` should not use CUDA intrinsics (it doesn't affect the PTX/SASS compared to a naive shift-based implementation), thereby making them `constexpr`-friendly and possible to put into a shared `hpp` header. https://github.com/rapidsai/cudf/pull/13681#discussion_r1264527017\r\n- The `@brief` of hashing APIs should mention the algorithm name. https://github.com/rapidsai/cudf/pull/13612/files#r1267270076","closed":false,"closedAt":null,"comments":[{"id":"IC_kwDOBWUGps5xBdz-","author":{"login":"bdice"},"authorAssociation":"CONTRIBUTOR","body":"- @nvdbaranec proposed moving the hash utilities added in #14391 (like `swap_endian`, `uint32ToLowercaseHexString`, ...) to a reusable utility header. Some of them might have applications beyond hashing.","createdAt":"2024-01-17T16:52:02Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/13706#issuecomment-1896209662","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps5xUe1A","author":{"login":"bdice"},"authorAssociation":"CONTRIBUTOR","body":"@davidwendt proposed removing unsanitized nulls from hashing tests. I agree with this idea. I refactored MD5's tests in https://github.com/rapidsai/cudf/pull/14391/commits/01881154feacfbc1fca4ee0e3b0a40ef56b5802f and will do the same for SHA in PR #14391, but additional work is needed for other hashing algorithms to remove unsanitized nulls from the tests.\r\n\r\nhttps://github.com/rapidsai/cudf/pull/14391#discussion_r1440568562","createdAt":"2024-01-19T22:13:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/13706#issuecomment-1901194560","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps5xi2oy","author":{"login":"bdice"},"authorAssociation":"CONTRIBUTOR","body":"We also need to standardize null behavior for hashing algorithms. See https://github.com/rapidsai/cudf/pull/10451.","createdAt":"2024-01-22T22:45:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/13706#issuecomment-1904962098","viewerDidAuthor":false}],"createdAt":"2023-07-17T16:24:38Z","id":"I_kwDOBWUGps5rxdAP","labels":[{"id":"MDU6TGFiZWw1OTk2MjY1NjE=","name":"feature request","description":"New feature or request","color":"a2eeef"},{"id":"MDU6TGFiZWwxMDEzOTg3MzUy","name":"0 - Backlog","description":"In queue waiting for assignment","color":"d4c5f9"},{"id":"MDU6TGFiZWwxMTM5NzQwNjY2","name":"libcudf","description":"Affects libcudf (C++/CUDA) code.","color":"c5def5"}],"milestone":null,"number":13706,"projectCards":[],"projectItems":[],"reactionGroups":[],"state":"OPEN","title":"[FEA] Hash function refactoring","updatedAt":"2024-01-22T22:45:53Z","url":"https://github.com/rapidsai/cudf/issues/13706"}
