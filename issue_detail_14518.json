{"assignees":[],"author":{"id":"MDQ6VXNlcjExNjY0MjU5","is_bot":false,"login":"galipremsagar","name":"GALI PREM SAGAR"},"body":"**Describe the bug**\r\nI think this is because the runpy commands we're using return the scripts globals dictionary and we need to use this to update the outer globals dict.\r\n\r\n\r\nNote that the [runpy documentation](https://docs.python.org/3/library/runpy.html) says:\r\n\r\n> [...], any functions and classes defined by the executed code are not guaranteed to work correctly after a [runpy](https://docs.python.org/3/library/runpy.html#module-runpy) function has returned. If that limitation is not acceptable for a given use case, [importlib](https://docs.python.org/3/library/importlib.html#module-importlib) is likely to be a more suitable choice than this module.\r\n\r\n\r\n**Steps/Code to reproduce bug**\r\n```python\r\n(cudfdev) /cudf$ cat foo.py \r\nVALUE = 1\r\n\r\n(cudfdev) /cudf$ python -i foo.py\r\n>>> VALUE\r\n1\r\n>>> exit()\r\n(cudfdev) /cudf$ python -i -m cudf.pandas foo.py\r\n>>> VALUE\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nNameError: name 'VALUE' is not defined\r\n>>> exit()\r\n```\r\n\r\n**Expected behavior**\r\n```python\r\n(cudfdev) /cudf$ python -i -m cudf.pandas foo.py\r\n>>> VALUE\r\n1\r\n```\r\n\r\n**Environment overview (please complete the following information)**\r\n - Environment location: [Bare-metal]\r\n - Method of cuDF install: [from source]\r\n","closed":false,"closedAt":null,"comments":[],"createdAt":"2023-11-28T19:37:03Z","id":"I_kwDOBWUGps54HPqD","labels":[{"id":"MDU6TGFiZWw1OTk2MjY1NTk=","name":"bug","description":"Something isn't working","color":"d73a4a"},{"id":"MDU6TGFiZWwxMTM5NzQxMjEz","name":"cuDF (Python)","description":"Affects Python cuDF API.","color":"1d76db"},{"id":"LA_kwDOBWUGps8AAAABlj4eYg","name":"cudf.pandas","description":"Issues specific to cudf.pandas","color":"984DFB"}],"milestone":{"number":36,"title":"cudf.pandas API coverage","description":"","dueOn":null},"number":14518,"projectCards":[],"projectItems":[],"reactionGroups":[],"state":"OPEN","title":"[BUG] `python -i -m cudf.pandas foo.py` does not leave interpreter with variables from `foo.py` in scope","updatedAt":"2024-05-16T05:09:16Z","url":"https://github.com/rapidsai/cudf/issues/14518"}
