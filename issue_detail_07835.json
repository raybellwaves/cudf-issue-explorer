{"assignees":[],"author":{"id":"MDQ6VXNlcjEzNTIxMDA4","is_bot":false,"login":"isVoid","name":"Michael Wang"},"body":"## What is the expected behavior of `Scalar.astype`?\r\n\r\nDuring implementing https://github.com/rapidsai/cudf/pull/7182, I realized `cudf.Scalar.astype`'s behavior is not well-defined. Since cudf Scalar has a host-side and a device-side, which one `astype` should operate on and what is the expected behavior? In addition, device side scalar is not really operable since libcudf does not cast scalars types. How to resolve for the discrepancy?\r\n\r\ncc @kkraus14 @brandon-b-miller ","closed":false,"closedAt":null,"comments":[{"id":"MDEyOklzc3VlQ29tbWVudDgxMjUxMTA1NA==","author":{"login":"brandon-b-miller"},"authorAssociation":"CONTRIBUTOR","body":"I think there can be three scenarios when `astype` is called on a cudf scalar `s`:\r\n\r\n- `s` host value is present, and its device value is not. This returns a new python object with a new host value, but still no device value.\r\n- both the host and device values are present for `s`. In this case, we cast the host value, and construct a new cudf scalar from the result. The question is should the device value be set. My initial thought is that there's no reason to set it until it's actually needed, and `.device_value` is accessed. \r\n- `s` device value is present, and the host value is not. Here I think we need to move the device value to host, cast it there and construct a new scalar again. The question is again should the device value be set - and I lean towards no for the same reasons as above - it shouldn't harm anything to leave it unsynchronized until it's used. \r\n\r\nMost of the time we'll obtain a numpy scalar and we can just use numpy casting to get the new scalar. But we'll need special handling for strings and decimals.\r\n","createdAt":"2021-04-02T12:34:46Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/7835#issuecomment-812511054","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDgzMzY2NTY3Ng==","author":{"login":"github-actions"},"authorAssociation":"NONE","body":"This issue has been labeled `inactive-30d` due to no recent activity in the past 30 days. Please close this issue if no further response or action is needed. Otherwise, please respond with a comment indicating any updates or changes to the original issue and/or confirm this issue still needs to be addressed. This issue will be labeled `inactive-90d` if there is no activity in the next 60 days.","createdAt":"2021-05-06T16:31:35Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/7835#issuecomment-833665676","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps49geMo","author":{"login":"github-actions"},"authorAssociation":"NONE","body":"This issue has been labeled `inactive-90d` due to no recent activity in the past 90 days. Please close this issue if no further response or action is needed. Otherwise, please respond with a comment indicating any updates or changes to the original issue and/or confirm this issue still needs to be addressed.","createdAt":"2022-02-07T21:04:55Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/7835#issuecomment-1031922472","viewerDidAuthor":false}],"createdAt":"2021-04-02T04:28:31Z","id":"MDU6SXNzdWU4NDg5NDkzMTA=","labels":[{"id":"MDU6TGFiZWw1OTk2MjY1NTk=","name":"bug","description":"Something isn't working","color":"d73a4a"},{"id":"MDU6TGFiZWwxMTM5NzQxMjEz","name":"cuDF (Python)","description":"Affects Python cuDF API.","color":"1d76db"}],"milestone":null,"number":7835,"projectCards":[{"project":{"name":"Bug Squashing"},"column":{"name":"Needs prioritizing"}}],"projectItems":[],"reactionGroups":[],"state":"OPEN","title":"[BUG] Scalar.astype is ill-defined","updatedAt":"2024-02-23T18:43:02Z","url":"https://github.com/rapidsai/cudf/issues/7835"}
