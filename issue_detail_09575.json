{"assignees":[{"id":"MDQ6VXNlcjExNjY0MjU5","login":"galipremsagar","name":"GALI PREM SAGAR"}],"author":{"id":"MDQ6VXNlcjI0ODQ0NzA1","is_bot":false,"login":"mlahir1","name":"Lahir Marni"},"body":"Aggregation(mean/sum) on cols NaN result in NaN value. even with dropna as `True`\r\n\r\n```\r\n>>> df  = cudf.DataFrame()\r\n>>> df['a'] = [1,2,3,0,4]\r\n>>> df['b'] = [1,1,1,0,1]\r\n>>> df['c'] = df.a/df.b\r\n>>> df['s'] = 0\r\n>>> df\r\n   a  b    c  s\r\n0  1  1  1.0  0\r\n1  2  1  2.0  0\r\n2  3  1  3.0  0\r\n3  0  0  NaN  0\r\n4  4  1  4.0  0\r\n>>> df[['c', 's']].groupby(['s']).mean()\r\n    c\r\ns    \r\n0 NaN\r\n```\r\n\r\n**Expected/Pandas behavior**\r\n```\r\n>>> import pandas as pd\r\n>>> df = pd.DataFrame()\r\n>>> df['a'] = [1,2,3,0,4]\r\n>>> df['b'] = [1,1,1,0,1]\r\n>>> df['c'] = df.a/df.b\r\n>>> df['s'] = 0\r\n>>> df\r\n   a  b    c  s\r\n0  1  1  1.0  0\r\n1  2  1  2.0  0\r\n2  3  1  3.0  0\r\n3  0  0  NaN  0\r\n4  4  1  4.0  0\r\n>>> df[['c', 's']].groupby(['s']).mean()\r\n     c\r\ns     \r\n0  2.5\r\n```","closed":false,"closedAt":null,"comments":[{"id":"IC_kwDOBWUGps45psz0","author":{"login":"beckernick"},"authorAssociation":"MEMBER","body":"This is probably due to edge cases in our NaN vs null handling.\r\n\r\nIf you call `df.nans_to_nulls().groupby(['s']).c.mean()`, this will behave as expected.","createdAt":"2021-11-12T16:09:01Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/rapidsai/cudf/issues/9575#issuecomment-967232756","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps47H7fS","author":{"login":"github-actions"},"authorAssociation":"NONE","body":"This issue has been labeled `inactive-30d` due to no recent activity in the past 30 days. Please close this issue if no further response or action is needed. Otherwise, please respond with a comment indicating any updates or changes to the original issue and/or confirm this issue still needs to be addressed. This issue will be labeled `inactive-90d` if there is no activity in the next 60 days.","createdAt":"2021-12-12T17:07:05Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/9575#issuecomment-991934418","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps4_iNVK","author":{"login":"github-actions"},"authorAssociation":"NONE","body":"This issue has been labeled `inactive-90d` due to no recent activity in the past 90 days. Please close this issue if no further response or action is needed. Otherwise, please respond with a comment indicating any updates or changes to the original issue and/or confirm this issue still needs to be addressed.","createdAt":"2022-03-12T18:03:15Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/9575#issuecomment-1065932106","viewerDidAuthor":false},{"id":"IC_kwDOBWUGps5O6e4w","author":{"login":"shwina"},"authorAssociation":"CONTRIBUTOR","body":"Since `Series.dropna()` drops `NaN`, I think it's fair to expect `groupby().dropna()` to follow suit. In other words, this is a bug in cuDF.","createdAt":"2022-11-22T16:37:53Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/9575#issuecomment-1323953712","viewerDidAuthor":false}],"createdAt":"2021-11-01T17:48:00Z","id":"I_kwDOBWUGps4-Evat","labels":[{"id":"MDU6TGFiZWw1OTk2MjY1NTk=","name":"bug","description":"Something isn't working","color":"d73a4a"},{"id":"MDU6TGFiZWwxMTM5NzQxMjEz","name":"cuDF (Python)","description":"Affects Python cuDF API.","color":"1d76db"}],"milestone":{"number":5,"title":"Pandas API Alignment and Coverage","description":"","dueOn":null},"number":9575,"projectCards":[{"project":{"name":"Bug Squashing"},"column":{"name":"Needs prioritizing"}}],"projectItems":[],"reactionGroups":[],"state":"OPEN","title":"[BUG] Aggregation with NaN not matching Pandas behavior","updatedAt":"2024-02-23T18:42:38Z","url":"https://github.com/rapidsai/cudf/issues/9575"}
