{"assignees":[{"id":"MDQ6VXNlcjE2MDA1Njkw","login":"vuule","name":"Vukasin Milovanovic"}],"author":{"id":"MDQ6VXNlcjE0NDUzNjg=","is_bot":false,"login":"cwharris","name":"Christopher Harris"},"body":"**Describe the bug**\r\nReader and writer tests have the potential to pass erroneously if the readers/writers change in a way that maintains isomorphism, regardless of whether the written contents contain the correct contents. Unlikely, but possible.\r\n\r\n**Expected behavior**\r\n- Reader tests should explicitly test reading file contents and verifying the parsed data is as expected.\r\n- Writer tests should explicitly test writing data and verifying the file contents is as expected.\r\n\r\nExamples:\r\nhttps://github.com/rapidsai/cudf/blob/2bc8eb0edfdc2974a17b396f572d9f16f23caf3c/cpp/tests/io/csv_test.cpp#L902-L911\r\nhttps://github.com/rapidsai/cudf/blob/2bc8eb0edfdc2974a17b396f572d9f16f23caf3c/cpp/tests/io/orc_test.cpp#L165-L173\r\nhttps://github.com/rapidsai/cudf/blob/2bc8eb0edfdc2974a17b396f572d9f16f23caf3c/cpp/tests/io/parquet_test.cpp#L191-L200","closed":false,"closedAt":null,"comments":[{"id":"MDEyOklzc3VlQ29tbWVudDY5MzUzNDQ2NA==","author":{"login":"vuule"},"authorAssociation":"CONTRIBUTOR","body":"Is this issue about the use of `CUDF_TEST_EXPECT_TABLES_EQUIVALENT` ?","createdAt":"2020-09-16T16:56:50Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/6222#issuecomment-693534464","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5MzU0NTUxMw==","author":{"login":"cwharris"},"authorAssociation":"CONTRIBUTOR","body":"No, this issue is about:\r\n```\r\ndata == decode(encode(data)) // is tested, guarantees isomorphism\r\nexpected_file == encode(data) // is not tested, does not guarantee expected bytes are written to file\r\nexpected_data == decode(file) // is not tested, does not guarantee expected data is read from file\r\n```","createdAt":"2020-09-16T17:18:14Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/6222#issuecomment-693545513","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5MzU1MjY4MQ==","author":{"login":"vuule"},"authorAssociation":"CONTRIBUTOR","body":"I don't think we have a way to test this in C++ tests.\r\nWe do have Python tests that leverage readers/writers from other libraries to validate the file content.\r\nThat said, how do resolve this issue? Migrate such tests to Python?","createdAt":"2020-09-16T17:32:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/rapidsai/cudf/issues/6222#issuecomment-693552681","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDY5MzYzMTgwMQ==","author":{"login":"cwharris"},"authorAssociation":"CONTRIBUTOR","body":"> I don't think we have a way to test this in C++ tests.\r\n\r\nPretty sure that's accurate.\r\n\r\nIt's technically possible to test them in c++, but it's **_very_** inconvenient because we'd need sample files and associated expected data. It'll definitely be easier to test on the python layer. It's possible we account for these cases in python tests already, but imho we should check python's tests before closing this issue.","createdAt":"2020-09-16T19:56:01Z","includesCreatedEdit":true,"isMinimized":false,"minimizedReason":"","reactionGroups":[{"content":"THUMBS_UP","users":{"totalCount":1}}],"url":"https://github.com/rapidsai/cudf/issues/6222#issuecomment-693631801","viewerDidAuthor":false},{"id":"MDEyOklzc3VlQ29tbWVudDc4MDEyMzU1Nw==","author":{"login":"github-actions"},"authorAssociation":"NONE","body":"This issue has been marked rotten due to no recent activity in the past 90d. Please close this issue if no further response or action is needed. Otherwise, please respond with a comment indicating any updates or changes to the original issue and/or confirm this issue still needs to be addressed.","createdAt":"2021-02-16T21:17:48Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/rapidsai/cudf/issues/6222#issuecomment-780123557","viewerDidAuthor":false}],"createdAt":"2020-09-14T14:39:00Z","id":"MDU6SXNzdWU3MDExNjQ1NTM=","labels":[{"id":"MDU6TGFiZWw1OTk2MjY1NTk=","name":"bug","description":"Something isn't working","color":"d73a4a"},{"id":"MDU6TGFiZWwxMDE2MzQyNTY3","name":"tests","description":"Unit testing for project","color":"204ea3"},{"id":"MDU6TGFiZWwxMTM5NzQwNjY2","name":"libcudf","description":"Affects libcudf (C++/CUDA) code.","color":"c5def5"},{"id":"MDU6TGFiZWwxMTg1MjQ0MTQy","name":"cuIO","description":"cuIO issue","color":"fef2c0"}],"milestone":null,"number":6222,"projectCards":[{"project":{"name":"Bug Squashing"},"column":{"name":"Needs prioritizing"}}],"projectItems":[],"reactionGroups":[],"state":"OPEN","title":"[BUG] cuio: reader/writer tests do not verify file contents, only isomorphism.","updatedAt":"2024-02-23T18:02:27Z","url":"https://github.com/rapidsai/cudf/issues/6222"}
